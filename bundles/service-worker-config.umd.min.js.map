{"version":3,"sources":["service-worker-config.umd.js"],"names":["global","factory","exports","module","define","amd","ng","serviceWorker","config","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","throw","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","y","t","call","label","ops","pop","trys","length","push","g","sent","return","Symbol","iterator","parseDurationToMs","duration","array","matches","PARSE_TO_PAIRS","exec","map","match","res","PAIR_SPLIT","Error","factor","parseInt","reduce","total","globToRegex","glob","segments","split","reverse","regex","segment","WILD_OPEN","TO_ESCAPE","escape","replace","with","globListToMatcher","globs","patterns","pattern","startsWith","positive","RegExp","substr","file","isMatch","test","joinUrls","a","b","endsWith","Generator","fs","baseHref","prototype","process","hashTable","_a","_b","configVersion","index","appData","processAssetGroups","assetGroups","dataGroups","processDataGroups","seenMap","_this","Set","all","group","fileMatcher","versionedMatcher","allFiles","versionedFiles","plainFiles","resources","files","list","filter","has","forEach","add","concat","previous","hash","urls","indexOf","name","installMode","updateMode","url","strategy","cacheConfig","maxSize","maxAge","timeoutMs","timeout","version","undefined","Object","defineProperty"],"mappings":"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","file":"service-worker-config.umd.min.js","sourcesContent":["/**\n * @license Angular v5.2.11-2fa61e8\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.ng = global.ng || {}, global.ng.serviceWorker = global.ng.serviceWorker || {}, global.ng.serviceWorker.config = {})));\n}(this, (function (exports) { 'use strict';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\n/**\n * @license Angular v5.2.11-2fa61e8\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar PARSE_TO_PAIRS = /([0-9]+[^0-9]+)/g;\nvar PAIR_SPLIT = /^([0-9]+)([dhmsu]+)$/;\n/**\n * @param {?} duration\n * @return {?}\n */\nfunction parseDurationToMs(duration) {\n    var /** @type {?} */ matches = [];\n    var /** @type {?} */ array;\n    while ((array = PARSE_TO_PAIRS.exec(duration)) !== null) {\n        matches.push(array[0]);\n    }\n    return matches\n        .map(function (match) {\n        var /** @type {?} */ res = PAIR_SPLIT.exec(match);\n        if (res === null) {\n            throw new Error(\"Not a valid duration: \" + match);\n        }\n        var /** @type {?} */ factor = 0;\n        switch (res[2]) {\n            case 'd':\n                factor = 86400000;\n                break;\n            case 'h':\n                factor = 3600000;\n                break;\n            case 'm':\n                factor = 60000;\n                break;\n            case 's':\n                factor = 1000;\n                break;\n            case 'u':\n                factor = 1;\n                break;\n            default:\n                throw new Error(\"Not a valid duration unit: \" + res[2]);\n        }\n        return parseInt(res[1]) * factor;\n    })\n        .reduce(function (total, value) { return total + value; }, 0);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar WILD_SINGLE = '[^\\\\/]+';\nvar WILD_OPEN = '(?:.+\\\\/)?';\nvar TO_ESCAPE = [\n    { replace: /\\./g, with: '\\\\.' },\n    { replace: /\\?/g, with: '\\\\?' },\n    { replace: /\\+/g, with: '\\\\+' },\n    { replace: /\\*/g, with: WILD_SINGLE },\n];\n/**\n * @param {?} glob\n * @return {?}\n */\nfunction globToRegex(glob) {\n    var /** @type {?} */ segments = glob.split('/').reverse();\n    var /** @type {?} */ regex = '';\n    while (segments.length > 0) {\n        var /** @type {?} */ segment = /** @type {?} */ ((segments.pop()));\n        if (segment === '**') {\n            if (segments.length > 0) {\n                regex += WILD_OPEN;\n            }\n            else {\n                regex += '.*';\n            }\n        }\n        else {\n            var /** @type {?} */ processed = TO_ESCAPE.reduce(function (segment, escape) { return segment.replace(escape.replace, escape.with); }, segment);\n            regex += processed;\n            if (segments.length > 0) {\n                regex += '\\\\/';\n            }\n        }\n    }\n    return regex;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Consumes service worker configuration files and processes them into control files.\n *\n * \\@experimental\n */\nvar Generator = /** @class */ (function () {\n    function Generator(fs, baseHref) {\n        this.fs = fs;\n        this.baseHref = baseHref;\n    }\n    /**\n     * @param {?} config\n     * @return {?}\n     */\n    Generator.prototype.process = /**\n     * @param {?} config\n     * @return {?}\n     */\n    function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var hashTable, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        hashTable = {};\n                        _a = {\n                            configVersion: 1,\n                            index: joinUrls(this.baseHref, config.index),\n                            appData: config.appData\n                        };\n                        return [4 /*yield*/, this.processAssetGroups(config, hashTable)];\n                    case 1: return [2 /*return*/, (_a.assetGroups = _b.sent(),\n                            _a.dataGroups = this.processDataGroups(config),\n                            _a.hashTable = hashTable,\n                            _a)];\n                }\n            });\n        });\n    };\n    /**\n     * @param {?} config\n     * @param {?} hashTable\n     * @return {?}\n     */\n    Generator.prototype.processAssetGroups = /**\n     * @param {?} config\n     * @param {?} hashTable\n     * @return {?}\n     */\n    function (config, hashTable) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            var seenMap;\n            return __generator(this, function (_a) {\n                seenMap = new Set();\n                return [2 /*return*/, Promise.all((config.assetGroups || []).map(function (group) { return __awaiter(_this, void 0, void 0, function () {\n                        var _this = this;\n                        var fileMatcher, versionedMatcher, allFiles, versionedFiles, plainFiles, patterns;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    fileMatcher = globListToMatcher(group.resources.files || []);\n                                    versionedMatcher = globListToMatcher(group.resources.versionedFiles || []);\n                                    return [4 /*yield*/, this.fs.list('/')];\n                                case 1:\n                                    allFiles = (_a.sent());\n                                    versionedFiles = allFiles.filter(versionedMatcher).filter(function (file) { return !seenMap.has(file); });\n                                    versionedFiles.forEach(function (file) { return seenMap.add(file); });\n                                    plainFiles = allFiles.filter(fileMatcher).filter(function (file) { return !seenMap.has(file); });\n                                    plainFiles.forEach(function (file) { return seenMap.add(file); });\n                                    // Add the hashes.\n                                    return [4 /*yield*/, versionedFiles.concat(plainFiles).reduce(function (previous, file) { return __awaiter(_this, void 0, void 0, function () {\n                                            var hash;\n                                            return __generator(this, function (_a) {\n                                                switch (_a.label) {\n                                                    case 0: return [4 /*yield*/, previous];\n                                                    case 1:\n                                                        _a.sent();\n                                                        return [4 /*yield*/, this.fs.hash(file)];\n                                                    case 2:\n                                                        hash = _a.sent();\n                                                        hashTable[joinUrls(this.baseHref, file)] = hash;\n                                                        return [2 /*return*/];\n                                                }\n                                            });\n                                        }); }, Promise.resolve())];\n                                case 2:\n                                    // Add the hashes.\n                                    // Add the hashes.\n                                    _a.sent();\n                                    patterns = (group.resources.urls || [])\n                                        .map(function (glob) {\n                                        return glob.startsWith('/') || glob.indexOf('://') !== -1 ?\n                                            glob :\n                                            joinUrls(_this.baseHref, glob);\n                                    })\n                                        .map(function (glob) { return globToRegex(glob); });\n                                    return [2 /*return*/, {\n                                            name: group.name,\n                                            installMode: group.installMode || 'prefetch',\n                                            updateMode: group.updateMode || group.installMode || 'prefetch',\n                                            urls: (/** @type {?} */ ([]))\n                                                .concat(plainFiles)\n                                                .concat(versionedFiles)\n                                                .map(function (url) { return joinUrls(_this.baseHref, url); }),\n                                            patterns: patterns,\n                                        }];\n                            }\n                        });\n                    }); }))];\n            });\n        });\n    };\n    /**\n     * @param {?} config\n     * @return {?}\n     */\n    Generator.prototype.processDataGroups = /**\n     * @param {?} config\n     * @return {?}\n     */\n    function (config) {\n        var _this = this;\n        return (config.dataGroups || []).map(function (group) {\n            var /** @type {?} */ patterns = group.urls\n                .map(function (glob) {\n                return glob.startsWith('/') || glob.indexOf('://') !== -1 ?\n                    glob :\n                    joinUrls(_this.baseHref, glob);\n            })\n                .map(function (glob) { return globToRegex(glob); });\n            return {\n                name: group.name,\n                patterns: patterns,\n                strategy: group.cacheConfig.strategy || 'performance',\n                maxSize: group.cacheConfig.maxSize,\n                maxAge: parseDurationToMs(group.cacheConfig.maxAge),\n                timeoutMs: group.cacheConfig.timeout && parseDurationToMs(group.cacheConfig.timeout),\n                version: group.version !== undefined ? group.version : 1,\n            };\n        });\n    };\n    return Generator;\n}());\n/**\n * @param {?} globs\n * @return {?}\n */\nfunction globListToMatcher(globs) {\n    var /** @type {?} */ patterns = globs.map(function (pattern) {\n        if (pattern.startsWith('!')) {\n            return {\n                positive: false,\n                regex: new RegExp('^' + globToRegex(pattern.substr(1)) + '$'),\n            };\n        }\n        else {\n            return {\n                positive: true,\n                regex: new RegExp('^' + globToRegex(pattern) + '$'),\n            };\n        }\n    });\n    return function (file) { return matches(file, patterns); };\n}\n/**\n * @param {?} file\n * @param {?} patterns\n * @return {?}\n */\nfunction matches(file, patterns) {\n    var /** @type {?} */ res = patterns.reduce(function (isMatch, pattern) {\n        if (pattern.positive) {\n            return isMatch || pattern.regex.test(file);\n        }\n        else {\n            return isMatch && !pattern.regex.test(file);\n        }\n    }, false);\n    return res;\n}\n/**\n * @param {?} a\n * @param {?} b\n * @return {?}\n */\nfunction joinUrls(a, b) {\n    if (a.endsWith('/') && b.startsWith('/')) {\n        return a + b.substr(1);\n    }\n    else if (!a.endsWith('/') && !b.startsWith('/')) {\n        return a + '/' + b;\n    }\n    return a + b;\n}\n\nexports.Generator = Generator;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=service-worker-config.umd.js.map\n"]}